import{useEffect as m,useRef as s}from"react";import{FocusableMode as d,isFocusableElement as C}from"../utils/focus-management.js";import{useWindowEvent as a}from"./use-window-event.js";function L(f,c,u=!0){let l=s(!1);m(()=>{requestAnimationFrame(()=>{l.current=u})},[u]);function i(t,o){if(!l.current||t.defaultPrevented)return;let E=function r(e){return typeof e=="function"?r(e()):Array.isArray(e)||e instanceof Set?e:[e]}(f),n=o(t);if(n!==null&&!!n.ownerDocument.documentElement.contains(n)){for(let r of E){if(r===null)continue;let e=r instanceof HTMLElement?r:r.current;if(e!=null&&e.contains(n))return}return!C(n,d.Loose)&&n.tabIndex!==-1&&t.preventDefault(),c(t,n)}}a("click",t=>i(t,o=>o.target),!0),a("blur",t=>i(t,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}export{L as useOutsideClick};
